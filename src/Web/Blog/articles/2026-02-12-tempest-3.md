---
title: Tempest 3.0
description: Tempest 3.0 comes with a new exception handler, several performance improvements,  PHP 8.5 support, and more.
tag: release
author: brent
---

Tempest 3.0 is now available, and I want to take a moment to specifically thank all contributors who helped with this release. We've seen a continuous growth in the Tempest community over these past two years, and it's amazing to work with so many talented developers. So thank you all!

Later in this post, I'll list [all breaking changes and how to use the automatic upgrader for existing projects](#breaking-changes-and-automatic-upgrade). First, I want to highlight some of the awesome new features in Tempest 3.0, you can also [read the full changelog here](https://github.com/tempestphp/tempest-framework/releases/tag/v3.0.0).

## New exception handler

Since the very start of Tempest, we relied on Whoops to render our error pages. While it worked, we always envisioned a more modern exception render that was easier to finetune to our needs. With Tempest 3.0 we took the first steps in making this vision a reality.

![](/img/tempest-3-exception.png)

Props to Enzo for taking the lead on this one. In the future, we want to continue to improve this page, and also further build on it to make debugging Tempest apps even better.

## PHP 8.5

I wrote about my vision for only supporting the latest PHP version over a year ago [on my personal blog](https://stitcher.io/blog/php-84-at-least), and this year we're continuing that same trend: Tempest 3.0 only supports PHP 8.5 or higher. The reasons are outlined in detail in that blog post, but the most prominent reasons are these:

- Delaying upgrades only postpones and complicates the work, it never solves any problems.
- I believe in OSS maintainers having a responsibility to push the PHP community forwards.
- We want Tempest to continue to be a modern framework. We can only do that by evolving together with PHP.

## Database improvements

We've done several improvements in the ORM and database components: we worked on [performance updates](https://github.com/tempestphp/tempest-framework/pull/1855) that make our ORM significantly faster; we also [support UUIDs as primary columns](https://github.com/tempestphp/tempest-framework/pull/1807); and we improved [`Query::toRawSql()`](https://github.com/tempestphp/tempest-framework/pull/1861) to make debugging complex queries a lot easier.

## Closure-based validation

Thanks to PHP 8.5, we can now support closure-based validation:

```php
use Tempest\Database\IsDatabaseModel;
use Tempest\Validation\Rules\ValidateWith;

final class Book
{
    use IsDatabaseModel;
    
    #[ValidateWith(static function (string $value): bool {
        return ! str_starts_with($value, ' ');
    })]
    public string $title;
}
```

Special thanks to [Mohammad](https://github.com/tempestphp/tempest-framework/pull/1828) for adding this!

## View improvements

We improved our view parser so that [whitespaces are kept as-is](https://github.com/tempestphp/tempest-framework/pull/1881). This makes it easier to debug compiled views, and also fixes some edge cases where white-spaces were wrongly stripped away. On top of that, we continued to improve Tempest View's performance, and added support for fallthrough attributes (special thanks to [Márk](https://github.com/tempestphp/tempest-framework/pull/1811) for that one)!

```html
<!-- x-test.view.php -->
<div class="test">
    <x-slot />
</div>

<!-- home.view.php -->
<x-test :class="$shouldHighlight ? 'bg-red-100' : ''">
    …
</x-test>

<!-- These attributes will now be merged correctly: -->
<!-- <div class="test bg-red-100"> -->
```


## OAuth improvements

Thanks to [iamdadmin](https://github.com/tempestphp/tempest-framework/pull/1919), our [OAuth support](../3.x/features/oauth) now also includes Twitch.

```php oauth-twitch.config.php
use Tempest\Auth\OAuth\Config\TwitchOAuthConfig;

return new TwitchOAuthConfig(
    clientId: env('TWITCH_CLIENT_ID'),
    clientSecret: env('TWITCH_CLIENT_SECRET'),
    redirectTo: [TwitchOAuthController::class, 'callback'],
);
```

We also fixed an annoying bug so that you can [automatically run migrations after installing one or more OAuth providers](https://github.com/tempestphp/tempest-framework/pull/1927).

## Console

Márk also added [support for console autocompletion](https://github.com/tempestphp/tempest-framework/pull/1851) in zsh and bash. It's as easy as running the `tempest completion:install` command, and you can [read more about it here](/3.x/essentials/console-commands#shell-completion).

Console autocompletion tends to be a tricky one to get right for all systems, so if you run into issues, please [let us know](https://github.com/tempestphp/tempest-framework).

## Breaking changes and automatic upgrades

Since Tempest is still a young framework, breaking changes are to be expected as we polish our codebase. As with the previous major release, we shipped an automatic upgrader, powered by [Rector](https://getrector.com/). First, make sure to install Rector in your project if you haven't already:

```
{:hl-comment:~:} composer require rector/rector --dev {:hl-comment:# to require rector as a dev dependency:}
{:hl-comment:~:} vendor/bin/rector {:hl-comment:# to create a default rector config file:}
```

Next, update Tempest; it's important to add the `--no-scripts` flag to prevent any errors from being thrown during the update.

```sh
{:hl-comment:~:} composer require tempest/framework:^3.0 --no-scripts
```

Then configure Rector to upgrade to Tempest 3.0:

```php
// rector.php

use \Tempest\Upgrade\Set\TempestSetList;

return RectorConfig::configure()
    // …
    ->withSets([TempestSetList::TEMPEST_30]);
```

Finally, run Rector:

```
{:hl-comment:~:} vendor/bin/rector {:hl-comment:# To update all your project files:}
```

Unfortunately we weren't able to automate the full upgrade because we're running into some limitations with Rector. In the future, we want to look into alternatives to truly automate the whole upgrade. If you have very extensive Rector knowledge and want to help out, feel free to get in touch via our [Discord server](/discord) or [GitHub](https://github.com/tempestphp/tempest-framework).

To make sure you don't miss anything, here's a list of all breaking changes with links to their pull requests:

- [Deprecated testing utilities were removed](https://github.com/tempestphp/tempest-framework/pull/1849)
- [View and route testing helpers were moved to their correct classes](https://github.com/tempestphp/tempest-framework/pull/1870)
- [Exception handling has been reworked](https://github.com/tempestphp/tempest-framework/pull/1819)
- [Session management and CSRF protection has been reworked](https://github.com/tempestphp/tempest-framework/pull/1829)
- [The `view` function has been moved to the `Tempest\View` namespace](https://github.com/tempestphp/tempest-framework/pull/1860)
- [`Arr\map_iterable` has been renamed to `Arr\map`](https://github.com/tempestphp/tempest-framework/pull/1884)
- [`--force` can now bypass `CautionMiddleware`](https://github.com/tempestphp/tempest-framework/pull/1804)
- [`Environment` was made an injectable dependency](https://github.com/tempestphp/tempest-framework/pull/1838)
- [Enum events are now supported in the event bus](https://github.com/tempestphp/tempest-framework/pull/1878)
- [Several other core functions have been moved to the correct namespace](https://github.com/tempestphp/tempest-framework/pull/1880)
- Both [LogConfig](#) and [DatabaseConfig](#) have been refactored and must be manually updated.

## What's next?

We've already started work on a new list of features and fixes for the [3.x release cycle](https://github.com/tempestphp/tempest-framework/milestone/20). Some big items coming up are: 